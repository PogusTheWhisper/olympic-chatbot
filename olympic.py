import streamlit as st
from openai import OpenAI

def call_llm(TYPHOON_API_KEY, model, max_tokens, temperature, top_p, user_input):


    client = OpenAI(
        api_key=TYPHOON_API_KEY,
        base_url="https://api.opentyphoon.ai/v1",
    )
    try:

        stream = client.chat.completions.create(
            model=model,
            messages=[
                {
                    "role": "system",
                    "content": """
                    ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏£‡∏±‡∏ö‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡πÄ‡∏õ‡πá‡∏ô ‡∏Ñ‡∏ô‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÇ‡∏≠‡∏•‡∏¥‡∏°‡∏õ‡∏¥‡∏Å
                    <‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠>
                        1.‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÇ‡∏≠‡∏•‡∏¥‡∏°‡∏õ‡∏¥‡∏Å‡πÄ‡∏ä‡πà‡∏ô‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏≤
                        2.‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏á‡∏≤‡∏ô
                        3.‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÉ‡∏´‡πâ‡∏ï‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                    <‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°>
                        ‡∏à‡∏±‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 33 ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 3 ‡∏ó‡∏µ‡πà‡∏ó‡∏≤‡∏á‡∏Å‡∏£‡∏∏‡∏á‡∏õ‡∏≤‡∏£‡∏µ‡∏™‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏†‡∏≤‡∏û
                        ----------------------
                        ‡∏¢‡∏Å‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å   
                        ‡∏£‡∏∏‡πà‡∏ô 71 ‡∏Å‡∏Å. ‡∏´‡∏ç‡∏¥‡∏á
                        - ‡∏ó‡∏≠‡∏á ‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡πÇ‡∏Ñ‡∏•‡∏≠‡∏°‡πÄ‡∏ö‡∏µ‡∏¢
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡πÄ‡∏≠‡∏Å‡∏ß‡∏≤‡∏î‡∏≠‡∏£‡πå

                        ‡∏£‡∏∏‡πà‡∏ô 89 ‡∏Å‡∏Å. ‡∏ä‡∏≤‡∏¢
                        - ‡∏ó‡∏≠‡∏á ‡∏ö‡∏±‡∏•‡πÅ‡∏Å‡πÄ‡∏£‡∏µ‡∏¢
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡πÇ‡∏Ñ‡∏•‡∏≠‡∏°‡πÄ‡∏ö‡∏µ‡∏¢
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏≠‡∏¥‡∏ï‡∏≤‡∏•‡∏µ
                        ----------------------
                        ‡πÄ‡∏ó‡∏Ñ‡∏ß‡∏±‡∏ô‡πÇ‡∏î
                        ‡∏£‡∏∏‡πà‡∏ô 67 ‡∏Å‡∏Å. ‡∏´‡∏ç‡∏¥‡∏á
                        - ‡∏ó‡∏≠‡∏á ‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ‡πÉ‡∏ï‡πâ
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏≠‡∏¥‡∏´‡∏£‡πà‡∏≤‡∏ô
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡πÅ‡∏Ñ‡∏ô‡∏≤‡∏î‡∏≤,‡∏ö‡∏±‡∏•‡πÅ‡∏Å‡πÄ‡∏£‡∏µ‡∏¢

                        ‡∏®‡∏®‡∏¥‡∏Å‡∏≤‡∏ô‡∏ï‡πå ‡∏ó‡∏≠‡∏á‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå ‡πÅ‡∏û‡πâ ‡πÇ‡∏≠‡πÇ‡∏ã‡∏î‡∏≤ ‡πÇ‡∏ã‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå‡πÇ‡∏à‡πÇ‡∏ô‡∏ß‡∏≤ ‡∏à‡∏≤‡∏Å‡∏≠‡∏∏‡∏ã‡πÄ‡∏ö‡∏Å‡∏¥‡∏™‡∏ñ‡∏≤‡∏ô ‡∏£‡∏≠‡∏ö‡πÅ‡∏Å‡πâ‡∏ï‡∏±‡∏ß 1‚Äì2 ‡∏¢‡∏Å

                        ‡∏£‡∏∏‡πà‡∏ô 80 ‡∏Å‡∏Å. ‡∏ä‡∏≤‡∏¢
                        - ‡∏ó‡∏≠‡∏á ‡∏ï‡∏π‡∏ô‡∏µ‡πÄ‡∏ã‡∏µ‡∏¢
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏≠‡∏¥‡∏´‡∏£‡πà‡∏≤‡∏ô
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏≠‡∏¥‡∏ï‡∏≤‡∏•‡∏µ, ‡πÄ‡∏î‡∏ô‡∏°‡∏≤‡∏£‡πå‡∏Å
                        ----------------------
                        ‡∏Å‡∏£‡∏µ‡∏ë‡∏≤
                        ‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î‡∏™‡∏π‡∏á ‡∏´‡∏ç‡∏¥‡∏á
                        - ‡∏ó‡∏≠‡∏á ‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡πÄ‡∏¢‡∏≠‡∏£‡∏°‡∏ô‡∏µ
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤

                        ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ‡∏û‡∏∏‡πà‡∏á‡πÅ‡∏´‡∏•‡∏ô ‡∏ä‡∏≤‡∏¢
                        - ‡∏ó‡∏≠‡∏á ‡∏õ‡∏≤‡∏Å‡∏µ‡∏™‡∏ñ‡∏≤‡∏ô
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏≠‡∏¥‡∏ô‡πÄ‡∏î‡∏µ‡∏¢
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡πÄ‡∏Å‡∏£‡∏ô‡∏≤‡∏î‡∏≤

                        ‡∏ß‡∏¥‡πà‡∏á 200 ‡πÄ‡∏°‡∏ï‡∏£ ‡∏ä‡∏≤‡∏¢
                        - ‡∏ó‡∏≠‡∏á ‡∏ö‡∏≠‡∏ï‡∏™‡∏ß‡∏≤‡∏ô‡∏≤
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤

                        ‡∏ß‡∏¥‡πà‡∏á 400 ‡πÄ‡∏°‡∏ï‡∏£ ‡∏´‡∏ç‡∏¥‡∏á
                        - ‡∏ó‡∏≠‡∏á ‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡πÄ‡∏ô‡πÄ‡∏ò‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏ô‡∏î‡πå

                        ‡∏ß‡∏¥‡πà‡∏á 110 ‡πÄ‡∏°‡∏ï‡∏£ ‡∏ä‡∏≤‡∏¢
                        - ‡∏ó‡∏≠‡∏á ‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏à‡∏≤‡πÄ‡∏°‡∏Å‡∏≤
                        ----------------------
                        ‡∏Æ‡∏≠‡∏Å‡∏Å‡∏µ‡πâ
                            
                        ‡∏ó‡∏µ‡∏°‡∏´‡∏ç‡∏¥‡∏á
                        - ‡∏ó‡∏≠‡∏á ‡πÄ‡∏ô‡πÄ‡∏ò‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏ô‡∏î‡πå
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏à‡∏µ‡∏ô
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏à‡∏ô‡∏ï‡∏¥‡∏ô‡∏≤
                        ----------------------
                        ‡πÄ‡∏ö‡∏£‡∏Å‡πÅ‡∏î‡∏ô‡∏ã‡πå
                            
                        ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ‡∏ö‡∏µ‡πÄ‡∏Å‡∏¥‡∏£‡πå‡∏•
                        - ‡∏ó‡∏≠‡∏á ‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏•‡∏¥‡∏ò‡∏±‡∏ß‡πÄ‡∏ô‡∏µ‡∏¢
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏à‡∏µ‡∏ô
                        ----------------------
                        ‡∏°‡∏ß‡∏¢‡∏™‡∏≤‡∏Å‡∏•
                            
                        ‡∏£‡∏∏‡πà‡∏ô 71 ‡∏Å‡∏Å. ‡∏ä‡∏≤‡∏¢
                        - ‡∏ó‡∏≠‡∏á ‡∏≠‡∏∏‡∏ã‡πÄ‡∏ö‡∏Å‡∏¥‡∏™‡∏ñ‡∏≤‡∏ô
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡πÄ‡∏°‡πá‡∏Å‡∏ã‡∏¥‡πÇ‡∏Å
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏≠‡∏∏‡∏ã‡πÄ‡∏ö‡∏Å‡∏¥‡∏™‡∏ñ‡∏≤‡∏ô

                        ‡∏£‡∏∏‡πà‡∏ô 50 ‡∏Å‡∏Å. ‡∏´‡∏ç‡∏¥‡∏á
                        - ‡∏ó‡∏≠‡∏á ‡∏à‡∏µ‡∏ô
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏ï‡∏∏‡∏£‡∏Å‡∏µ
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏Ñ‡∏≤‡∏ã‡∏±‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô, ‡∏ü‡∏¥‡∏•‡∏¥‡∏õ‡∏õ‡∏¥‡∏ô‡∏™‡πå

                        ‡∏£‡∏∏‡πà‡∏ô 92 ‡∏Å‡∏Å. ‡∏ä‡∏≤‡∏¢
                        - ‡∏ó‡∏≠‡∏á ‡∏≠‡∏∏‡∏ã‡πÄ‡∏ö‡∏Å‡∏¥‡∏™‡∏ñ‡∏≤‡∏ô
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏≠‡∏≤‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏ö‡∏à‡∏±‡∏ô
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏™‡πÄ‡∏õ‡∏ô, ‡∏ó‡∏≤‡∏à‡∏¥‡∏Å‡∏¥‡∏™‡∏ñ‡∏≤‡∏ô

                        ‡∏£‡∏∏‡πà‡∏ô 66 ‡∏Å‡∏Å. ‡∏´‡∏ç‡∏¥‡∏á
                        - ‡∏ó‡∏≠‡∏á ‡πÅ‡∏≠‡∏•‡∏à‡∏µ‡πÄ‡∏£‡∏µ‡∏¢
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏à‡∏µ‡∏ô
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡πÑ‡∏ï‡πâ‡∏´‡∏ß‡∏±‡∏ô, ‡πÑ‡∏ó‡∏¢ (‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡πÅ‡∏à‡πà‡∏° ‡∏™‡∏∏‡∏ß‡∏£‡∏£‡∏ì‡πÄ‡∏û‡πá‡∏á)
                        ----------------------
                        ‡∏ß‡∏≠‡∏•‡πÄ‡∏•‡∏¢‡πå‡∏ö‡∏≠‡∏•‡∏ä‡∏≤‡∏¢‡∏´‡∏≤‡∏î
                            
                        ‡∏ó‡∏µ‡∏°‡∏´‡∏ç‡∏¥‡∏á
                        - ‡∏ó‡∏≠‡∏á ‡∏ö‡∏£‡∏≤‡∏ã‡∏¥‡∏•
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡πÅ‡∏Ñ‡∏ô‡∏≤‡∏î‡∏≤
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏™‡∏ß‡∏¥‡∏ï‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏ô‡∏î‡πå
                        ----------------------
                        ‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡∏°‡∏≤‡∏£‡∏≤‡∏ò‡∏≠‡∏ô
                            
                        ‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡∏°‡∏≤‡∏£‡∏≤‡∏ò‡∏≠‡∏ô 10 ‡∏Å‡∏°. ‡∏ä‡∏≤‡∏¢
                        - ‡∏ó‡∏≠‡∏á ‡∏Æ‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏µ
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡πÄ‡∏¢‡∏≠‡∏£‡∏°‡∏ô‡∏µ

                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏Æ‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏µ
                        ----------------------
                        ‡∏Å‡∏≠‡∏•‡πå‡∏ü
                            
                        ‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏´‡∏ç‡∏¥‡∏á ‡∏£‡∏≠‡∏ö‡∏™‡∏≤‡∏°
                        - ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 5 ‡∏≠‡∏≤‡∏í‡∏¢‡∏≤ ‡∏ê‡∏¥‡∏ï‡∏¥‡∏Å‡∏∏‡∏• -6  F  -3  72  69  69
                        - ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 17 ‡∏õ‡∏†‡∏±‡∏á‡∏Å‡∏£ ‡∏ò‡∏ß‡∏±‡∏ä‡∏ò‡∏ô‡∏Å‡∏¥‡∏à -1  F  -4  76  71  68
                        ----------------------    
                        ‡∏õ‡∏µ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ú‡∏≤
                            
                        Boulder & Lead ‡∏ä‡∏≤‡∏¢
                        - ‡∏ó‡∏≠‡∏á ‡∏™‡∏´‡∏£‡∏≤‡∏ä‡∏≠‡∏≤‡∏ì‡∏≤‡∏à‡∏±‡∏Å‡∏£
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏≠‡∏≠‡∏™‡πÄ‡∏ï‡∏£‡∏µ‡∏¢
                        ----------------------
                        ‡πÄ‡∏£‡∏∑‡∏≠‡πÅ‡∏Ñ‡∏ô‡∏π
                            
                        ‡πÅ‡∏Ñ‡∏ô‡∏π‡∏´‡∏ç‡∏¥‡∏á‡∏Ñ‡∏π‡πà 500 ‡πÄ‡∏°‡∏ï‡∏£
                        - ‡∏ó‡∏≠‡∏á ‡∏à‡∏µ‡∏ô
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏¢‡∏π‡πÄ‡∏Ñ‡∏£‡∏ô
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡πÅ‡∏Ñ‡∏ô‡∏≤‡∏î‡∏≤

                        ‡∏Ñ‡∏≤‡∏¢‡∏±‡∏Ñ‡∏´‡∏ç‡∏¥‡∏á‡∏Ñ‡∏π‡πà 500 ‡πÄ‡∏°‡∏ï‡∏£
                        - ‡∏ó‡∏≠‡∏á ‡∏ô‡∏¥‡∏ß‡∏ã‡∏µ‡πÅ‡∏•‡∏ô‡∏î‡πå
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏Æ‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏µ
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡πÄ‡∏¢‡∏≠‡∏£‡∏°‡∏ô‡∏µ, ‡∏Æ‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏µ

                        ‡∏Ñ‡∏≤‡∏¢‡∏±‡∏Ñ‡∏ä‡∏≤‡∏¢‡∏Ñ‡∏π‡πà 500 ‡πÄ‡∏°‡∏ï‡∏£
                        - ‡∏ó‡∏≠‡∏á ‡πÄ‡∏¢‡∏≠‡∏£‡∏°‡∏ô‡∏µ
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏Æ‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏µ
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏≠‡∏≠‡∏™‡πÄ‡∏ï‡∏£‡πÄ‡∏•‡∏µ‡∏¢

                        ‡πÅ‡∏Ñ‡∏ô‡∏π‡∏ä‡∏≤‡∏¢ 1,000 ‡πÄ‡∏°‡∏ï‡∏£
                        - ‡∏ó‡∏≠‡∏á ‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏£‡∏±‡∏ê‡πÄ‡∏ä‡πá‡∏Å
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏ö‡∏£‡∏≤‡∏ã‡∏¥‡∏•
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏°‡∏≠‡∏•‡πÇ‡∏î‡∏ß‡∏≤
                        ----------------------
                        ‡πÄ‡∏ó‡πÄ‡∏ö‡∏¥‡∏•‡πÄ‡∏ó‡∏ô‡∏ô‡∏¥‡∏™

                        ‡∏ó‡∏µ‡∏°‡∏ä‡∏≤‡∏¢
                        - ‡∏ó‡∏≠‡∏á ‡∏à‡∏µ‡∏ô
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏™‡∏ß‡∏µ‡πÄ‡∏î‡∏ô
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏ù‡∏£‡∏±‡πà‡∏á‡πÄ‡∏®‡∏™
                        ----------------------
                        ‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•
                            
                        ‡∏ó‡∏µ‡∏°‡∏´‡∏ç‡∏¥‡∏á ‡∏£‡∏≠‡∏ö‡∏ä‡∏¥‡∏á‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á
                        - ‡πÄ‡∏¢‡∏≠‡∏£‡∏°‡∏ô‡∏µ ‡∏ä‡∏ô‡∏∞ ‡∏™‡πÄ‡∏õ‡∏ô 1-0

                        ‡∏ó‡∏µ‡∏°‡∏ä‡∏≤‡∏¢
                        - ‡∏ó‡∏≠‡∏á ‡∏™‡πÄ‡∏õ‡∏ô
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏ù‡∏£‡∏±‡πà‡∏á‡πÄ‡∏®‡∏™
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡πÇ‡∏°‡∏£‡πá‡∏≠‡∏Å‡πÇ‡∏Å

                        ‡∏™‡πÄ‡∏õ‡∏ô ‡πÄ‡∏™‡∏°‡∏≠ ‡∏ù‡∏£‡∏±‡πà‡∏á‡πÄ‡∏®‡∏™ 3-3 (‡∏™‡πÄ‡∏õ‡∏ô ‡∏ä‡∏ô‡∏∞‡∏ï‡πà‡∏≠‡πÄ‡∏ß‡∏•‡∏≤ 5-3)
                        ----------------------
                        ‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î‡∏ô‡πâ‡∏≥
                            
                        ‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏ö‡∏≠‡∏£‡πå‡∏î 3 ‡πÄ‡∏°‡∏ï‡∏£ ‡∏´‡∏ç‡∏¥‡∏á
                        - ‡∏ó‡∏≠‡∏á ‡∏à‡∏µ‡∏ô
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏≠‡∏≠‡∏™‡πÄ‡∏ï‡∏£‡πÄ‡∏•‡∏µ‡∏¢
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏à‡∏µ‡∏ô
                        ----------------------
                        ‡∏ß‡∏≠‡∏•‡πÄ‡∏•‡∏¢‡πå‡∏ö‡∏≠‡∏•
                            
                        ‡∏ó‡∏µ‡∏°‡∏ä‡∏≤‡∏¢ ‡∏£‡∏≠‡∏ö‡∏ä‡∏¥‡∏á‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á
                        - ‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤ ‡∏ä‡∏ô‡∏∞ ‡∏≠‡∏¥‡∏ï‡∏≤‡∏•‡∏µ 3-0 ‡πÄ‡∏ã‡∏ï (25-23, 30-28, 26-24)
                        ----------------------
                        ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô
                            
                        ‡∏™‡∏õ‡∏£‡∏¥‡∏ô‡∏ó‡πå ‡∏ä‡∏≤‡∏¢
                        - ‡∏ó‡∏≠‡∏á ‡πÄ‡∏ô‡πÄ‡∏ò‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏ô‡∏î‡πå
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏≠‡∏≠‡∏™‡πÄ‡∏ï‡∏£‡πÄ‡∏•‡∏µ‡∏¢
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏™‡∏´‡∏£‡∏≤‡∏ä‡∏≠‡∏≤‡∏ì‡∏≤‡∏à‡∏±‡∏Å‡∏£

                        ‡πÄ‡∏°‡∏î‡∏¥‡∏™‡∏±‡∏ô ‡∏´‡∏ç‡∏¥‡∏á
                        - ‡∏ó‡∏≠‡∏á ‡∏≠‡∏¥‡∏ï‡∏≤‡∏•‡∏µ
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏™‡∏´‡∏£‡∏≤‡∏ä‡∏≠‡∏≤‡∏ì‡∏≤‡∏à‡∏±‡∏Å‡∏£
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡πÄ‡∏ô‡πÄ‡∏ò‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏ô‡∏î‡πå
                        ----------------------
                        ‡∏°‡∏ß‡∏¢‡∏õ‡∏•‡πâ‡∏≥
                            
                        ‡∏ü‡∏£‡∏µ‡∏™‡πÑ‡∏ï‡∏•‡πå ‡∏£‡∏∏‡πà‡∏ô 86 ‡∏Å‡∏Å. ‡∏ä‡∏≤‡∏¢
                        - ‡∏ó‡∏≠‡∏á ‡∏ö‡∏±‡∏•‡πÅ‡∏Å‡πÄ‡∏£‡∏µ‡∏¢
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏≠‡∏¥‡∏´‡∏£‡πà‡∏≤‡∏ô
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤,‡∏Å‡∏£‡∏µ‡∏ã

                        ‡∏ü‡∏£‡∏µ‡∏™‡πÑ‡∏ï‡∏•‡πå ‡∏£‡∏∏‡πà‡∏ô 57 ‡∏Å‡∏Å. ‡∏ä‡∏≤‡∏¢
                        - ‡∏ó‡∏≠‡∏á ‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏≠‡∏¥‡∏ô‡πÄ‡∏î‡∏µ‡∏¢, ‡∏≠‡∏∏‡∏ã‡πÄ‡∏ö‡∏Å‡∏¥‡∏™‡∏ñ‡∏≤‡∏ô

                        ‡∏ü‡∏£‡∏µ‡∏™‡πÑ‡∏ï‡∏•‡πå ‡∏£‡∏∏‡πà‡∏ô 57 ‡∏Å‡∏Å. ‡∏´‡∏ç‡∏¥‡∏á
                        - ‡∏ó‡∏≠‡∏á ‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô
                        - ‡πÄ‡∏á‡∏¥‡∏ô ‡∏°‡∏≠‡∏•‡πÇ‡∏î‡∏ß‡∏≤
                        - ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤, ‡∏à‡∏µ‡∏ô
                        ----------------------
                    """,
                
                },
                {
                    "role": "user",
                    "content": user_input,
                }
            ],
            max_tokens=max_tokens,
            temperature=temperature,
            top_p=top_p,
            stream=True,
        )
    except:
        return '<API_KEY_ERROR>'

    else:
        respond=[]
        for chunk in stream:
            if hasattr(chunk, 'choices') and len(chunk.choices) > 0:
                choice = chunk.choices[0]
                if hasattr(choice, 'delta') and hasattr(choice.delta, 'content'):
                    if choice.delta.content is not None:
                        respond.append(choice.delta.content)

        return "".join(respond)

def main():
    st.title(":orange[Olympic Chatbot]")
    st.markdown(':blue[‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏π‡∏î‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö] :violet[Olympic Chatbot] :green[Ai] :red[‡∏™‡∏∏‡∏î‡πÄ‡∏´‡∏•‡πà‡∏ó‡πà‡∏≠]:orange[‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡∏á‡∏≤‡∏ô ‡πÇ‡∏≠‡∏•‡∏¥‡∏°‡∏õ‡∏¥‡∏Å]')
    st.caption("Powered by Typhoon SCB10x")
    
    with st.sidebar:
        
        a, b, c, d = st.columns(4)
        with b:
            st.image('logo.png', width=125)
                
        st.title("Config")
        st.markdown('Generate key form here https://opentyphoon.ai/')
        
        if "typhoon_api_key" not in st.session_state:
            st.session_state["typhoon_api_key"] = ""
    
        # Input fields
        typhoon_api_key = st.text_input(
            label='TYPHOON API KEY', 
            placeholder='Place key here', 
            value=st.session_state.get('typhoon_api_key', '')
        )
        
        model = st.selectbox(
            label="Model", 
            options=( "typhoon-instruct", "typhoon-v1.5x-70b-instruct"),
            index=st.session_state.get('model_index', 0)
        )
        
        max_token = st.slider(
            label='Max Token', 
            min_value=50, 
            max_value=512, 
            step=10, 
            value=st.session_state.get('max_token', 300)
        )
        
        temperature = st.slider(
            label='Temperature', 
            min_value=0.0, 
            max_value=1.0, 
            step=0.05, 
            value=st.session_state.get('temperature', 0.6)
        )
        
        top_p = st.slider(
            label='Top P', 
            min_value=0.0, 
            max_value=1.0, 
            step=0.05, 
            value=st.session_state.get('top_p', 0.95)
        )

        # Save button
        if st.button('Save Config'):
            st.session_state['typhoon_api_key'] = typhoon_api_key
            st.session_state['model'] = model
            st.session_state['max_token'] = max_token
            st.session_state['temperature'] = temperature
            st.session_state['top_p'] = top_p
            st.success("Configuration saved!")

    with st.chat_message("assistant", avatar='ü•ê'):
        st.write("‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏™‡∏á‡∏™‡∏±‡∏¢‡∏ï‡∏£‡∏á‡πÑ‡∏´‡∏ô‡πÑ‡∏´‡∏°‡∏Ñ‡∏£‡∏±‡∏ö")
                
    prompt = st.chat_input("‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ!!")
            
    if 'conversation' not in st.session_state:
        st.session_state['conversation'] = []
        
    if prompt:
        st.session_state['conversation'].append({"role": "user", "content": prompt})

        conversation_history = "\n".join([f"{msg['content']}" for msg in st.session_state['conversation']])
        response = call_llm(st.session_state['typhoon_api_key'], st.session_state['model'], st.session_state['max_token'], st.session_state['temperature'], st.session_state['top_p'], conversation_history)

        st.session_state['conversation'].append({"role": "assistant", "content": response})

        for msg in st.session_state['conversation']:
            with st.chat_message(msg['role']):
                st.write(msg['content'])
                
if __name__ == "__main__":
    main()